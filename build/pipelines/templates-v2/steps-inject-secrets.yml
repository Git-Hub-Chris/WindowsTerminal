parameters:
  - name: githubClientSecret
    type: string
    default: 'FineKeepYourSecrets'

steps:
  - pwsh: |-
      $header = Get-Item src/cascadia/QueryExtension/WindowsTerminalIDAndSecret.h -ErrorAction:Ignore
      If ($Null -ne $header) {
        $content = Get-Content $header -ReadCount 0
        $content = $content -Replace "FineKeepYourSecrets","${{parameters.githubClientSecret}}"
        Set-Content $header $content
      }
    displayName: Inject GitHub Secret
